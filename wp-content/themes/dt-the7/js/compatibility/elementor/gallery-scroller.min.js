!function(e){function t(e){var t=e.find(".dt-product-gallery"),i=e.find(".dt-product-thumbs .slides").find("li:eq(0)").find("img"),a=t.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=a.find(".wp-post-image"),n=a.find("a").eq(0);r.wc_reset_variation_attr("src"),r.wc_reset_variation_attr("width"),r.wc_reset_variation_attr("height"),r.wc_reset_variation_attr("srcset"),r.wc_reset_variation_attr("sizes"),r.wc_reset_variation_attr("title"),r.wc_reset_variation_attr("data-caption"),r.wc_reset_variation_attr("alt"),r.wc_reset_variation_attr("data-src"),r.wc_reset_variation_attr("data-large_image"),r.wc_reset_variation_attr("data-large_image_width"),r.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("data-thumb"),i.wc_reset_variation_attr("src"),i.wc_reset_variation_attr("srcset"),i.wc_reset_variation_attr("data-src"),n.wc_reset_variation_attr("href")}e.productGallery=function(t){var i,a,r,n,o,s=e(t),d=s.find(".dt-wc-product-gallery"),l=d.find(".dt-product-thumbs"),c=d.find(".dt-product-gallery"),m=c.find(".flexslider"),u=l.find(".flexslider"),v=s.find(".the7-video-overlay"),g=s.find(".woocommerce-product-gallery_video"),f=".flex-direction-nav a",p=!!e("html.touchevents").length,h={},_="zoom-handled";s.vars={},e.data(t,"productGallery",s),h={initVars:function(){s.css("--widget-width",s.width()+"px"),s.vars.scrollMode="horizontal",l.length&&(s.vars.scrollMode=the7Utils.parseParam(l.attr("data-scroll-mode"),"horizontal"),s.vars.thumbGap=the7Utils.parseIntParam(s.css("--thumbs-spacing"),0),s.vars.colNum=the7Utils.parseIntParam(s.css("--thumbs-items"),3)),s.vars.isVertical="vertical"===s.vars.scrollMode},init:function(){h.initVars(),i=new The7ElementorSettings(s),a=i.getSettings(),!!a.controls,r=!!a.autoplay,n=!!a.play_on_mobile,o=elementorFrontend.getCurrentDeviceMode();var t=m.find(f),l=the7Utils.parseParam(d.attr("data-animation"),"slide"),p="fade"===l?400:600,_=!0,w=!1;if((s.hasClass("lightbox-on-click-y")||s.find(".zoom-flash").length)&&s.find(".dt-gallery-container").initPhotoswipe(),c.on("click",".zoom-flash",(function(e){e.preventDefault(),c.find(".flex-active-slide .dt-pswp-item ").trigger("click")})),s.hasClass("lightbox-on-click-y")&&s.hasClass("show-image-zoom-yes")&&c.on("click",'img[role="presentation"]',(function(t){e(this).prev(".dt-pswp-item ").trigger("click")})),s.on("woocommerce_gallery_reset_slide_position",h.onResetSlidePosition),m.find(".slides > li").length>1&&(w=!0),c.on("click",".woocommerce-product-gallery_video",(function(){var t=e(this).find("video");t.length&&(t.get(0).paused?t.get(0).play():t.get(0).pause())})),m.flexslider({animation:l,animationSpeed:p,controlNav:!1,animationLoop:w,slideshow:!1,customDirectionNav:t,prevText:"",nextText:"",allowOneSlide:!0,before:function(e){h.playPauseVideo(e,"pause"),c.removeClass("img-slide-active")},after:function(e){h.productInitZoomForCurrentSlide(e),("desktop"===o&&r||"mobile"===o&&r&&n)&&h.playPauseVideo(e,"play"),c.find(".woocommerce-product-gallery_video").hasClass("flex-active-slide")||c.addClass("img-slide-active")},sync:u,init:function(t){c.find(".woocommerce-product-gallery_video").hasClass("flex-active-slide")||c.addClass("img-slide-active"),t.find(".slides li img").the7ImageRatio(),h.deInitZoomInSlide(t),("desktop"===o&&r||"mobile"===o&&r&&n)&&setTimeout((function(){h.playPauseVideo(t,"play")}),1200),v.length&&g.on("click",(function(i){var a=e(this);a.hasClass("playing-video")||(a.find(".the7-video-overlay").remove(),h.playPauseVideo(t,"play"),a.addClass("playing-video"))})),h.productInitZoomForCurrentSlide(t),_&&u.find(".slides > li").length>1&&(_=!1,h.thumbs.init())},start:function(t){s.updateGalleryImages(),m.css("visibility","inherit"),t.find(".slides > li").length>1&&"fade"===t.vars.animation&&(namespace=t.vars.namespace,t.viewport=e('<div class="'+namespace+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(t).append(t.container))}}),void 0===y)var y={}},thumbs:{init:function(){var t,i,a,r,n,o,d,c=l.find(f),v=!0;u.flexslider({animation:"slide",animationLoop:!0,controlNav:!1,customDirectionNav:c,move:1,slideshow:!1,itemWidth:100,itemMargin:s.vars.thumbGap,direction:s.vars.scrollMode,prevText:"",nextText:"",directionNav:!0,asNavFor:m,init:function(s){o=s.vars.namespace;var l=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture;t=("ontouchstart"in window||l||window.DocumentTouch&&document instanceof DocumentTouch)&&s.vars.touch,i="vertical"===s.vars.direction,a=s.vars.reverse,r=s.vars.itemWidth>0,n="fade"===s.vars.animation,d=""!==s.vars.asNavFor,v&&(v=!1,s.doMath=function(){var e=s.slides.first(),t=s.vars.itemMargin,a=s.vars.minItems,n=s.vars.maxItems;i?(s.w=void 0===s.viewport?s.height():s.viewport.height(),s.isFirefox&&(s.w=s.height()),s.h=e.width(),s.boxPadding=e.outerHeight()-e.height()):(s.w=void 0===s.viewport?s.width():s.viewport.width(),s.isFirefox&&(s.w=s.width()),s.h=e.height(),s.boxPadding=e.outerWidth()-e.width()),r?(s.itemT=s.vars.itemWidth+t,s.itemM=t,s.minW=a?a*s.itemT:s.w,s.maxW=n?n*s.itemT-t:s.w,s.itemW=s.minW>s.w?(s.w-t*(a-1))/a:s.maxW<s.w?(s.w-t*(n-1))/n:s.vars.itemWidth>s.w?s.w:s.vars.itemWidth,s.visible=Math.floor(s.w/s.itemW),s.move=s.vars.move>0&&s.vars.move<s.visible?s.vars.move:s.visible,s.pagingCount=Math.ceil((s.count-s.visible)/s.move+1),s.last=s.pagingCount-1,s.limit=1===s.pagingCount?0:s.vars.itemWidth>s.w?s.itemW*(s.count-1)+t*(s.count-1):(s.itemW+t)*s.count-s.w-t):(s.itemW=s.w,s.itemM=t,s.pagingCount=s.count,s.last=s.count-1),s.computedW=s.itemW-s.boxPadding,s.computedM=s.itemM},s.canAdvance=function(e,t){var i=d?s.pagingCount-1:s.last;return!!t||(!(!d||s.currentItem!==s.count-1||0!==e||"prev"!==s.direction)||(!(!d||0!==s.currentItem||e!==s.pagingCount-1||"next"===s.direction)||!(e===s.currentSlide&&!d)&&(!!s.vars.animationLoop||(!s.atEnd||0!==s.currentSlide||e!==i||"next"===s.direction)&&(!s.atEnd||s.currentSlide!==i||0!==e||"next"!==s.direction))))},s.flexAnimate=function(l,c,m,u,v){if(s.vars.animationLoop||l===s.currentSlide||(s.direction=l>s.currentSlide?"next":"prev"),d&&1===s.pagingCount&&(s.direction=s.currentItem<l?"next":"prev"),!s.animating&&(s.canAdvance(l,v)||m)&&s.is(":visible")){if(d&&u){var g=e(s.vars.asNavFor).data("flexslider");if(s.atEnd=0===l||l===s.count-1,g.flexAnimate(l,!0,!1,!0,v),s.direction=s.currentItem<l?"next":"prev",g.direction=s.direction,s.currentItem=l,s.slides.removeClass(o+"active-slide").eq(l).addClass(o+"active-slide"),s.currentItem>=s.currentSlide+s.visible)l=s.currentItem-s.visible+1;else{if(!(s.currentItem<s.currentSlide))return!0;l=s.currentItem}}if(s.animating=!0,s.animatingTo=l,c&&s.pause(),s.vars.before(s),r||s.slides.removeClass(o+"active-slide").eq(l).addClass(o+"active-slide"),s.atEnd=0===l||l===s.last,s.vars.directionNav){var f=o+"disabled";1===s.pagingCount?s.directionNav.addClass(f).attr("tabindex","-1"):s.vars.animationLoop?s.directionNav.removeClass(f).removeAttr("tabindex"):0===s.animatingTo?s.directionNav.removeClass(f).filter("."+o+"prev").addClass(f).attr("tabindex","-1"):s.animatingTo===s.last?s.directionNav.removeClass(f).filter("."+o+"next").addClass(f).attr("tabindex","-1"):s.directionNav.removeClass(f).removeAttr("tabindex")}if(l===s.last&&(s.vars.end(s),s.vars.animationLoop||s.pause()),n)t?(s.slides.eq(s.currentSlide).css({opacity:0,zIndex:1}),s.slides.eq(l).css({opacity:1,zIndex:2}),s.wrapup(w)):(s.slides.eq(s.currentSlide).css({zIndex:1}).animate({opacity:0},s.vars.animationSpeed,s.vars.easing),s.slides.eq(l).css({zIndex:2}).animate({opacity:1},s.vars.animationSpeed,s.vars.easing,s.wrapup));else{var p,h,_,w=i?s.slides.filter(":first").height():s.computedW;r?(p=s.vars.itemMargin,h=(_=(s.itemW+p)*s.move*s.animatingTo)>s.limit&&1!==s.visible?s.limit:_):h=0===s.currentSlide&&l===s.count-1&&s.vars.animationLoop&&"next"!==s.direction?a?(s.count+s.cloneOffset)*w:0:s.currentSlide===s.last&&0===l&&s.vars.animationLoop&&"prev"!==s.direction?a?0:(s.count+1)*w:a?(s.count-1-l+s.cloneOffset)*w:(l+s.cloneOffset)*w,s.setProps(h,"",s.vars.animationSpeed),s.transitions?(s.vars.animationLoop&&s.atEnd||(s.animating=!1,s.currentSlide=s.animatingTo),s.container.unbind("webkitTransitionEnd transitionend"),s.container.bind("webkitTransitionEnd transitionend",(function(){clearTimeout(s.ensureAnimationEnd),s.wrapup(w)})),clearTimeout(s.ensureAnimationEnd),s.ensureAnimationEnd=setTimeout((function(){s.wrapup(w)}),s.vars.animationSpeed+100)):s.container.animate(s.args,s.vars.animationSpeed,s.vars.easing,(function(){s.wrapup(w)}))}}},s.find(".slides li img").the7ImageRatio(),h.calculateProductThumbnailSize(!0),s.css("visibility","inherit"))},start:function(e){var t=0;e.on("wheel",(function(i){if(e.count<=e.visible)return!0;var a,r=i.originalEvent.deltaY,n=(new Date).getTime();return n-t<1e3||(a=r<0?e.getTarget("prev"):e.getTarget("next"),e.flexAnimate(a,e.vars.pauseOnAction),t=n),!1}))}})}},prepareImages:function(e,t){e.the7ImageRatio("update",t)},deInitZoom:function(e){e.hasClass(_),e.removeClass(_),e.trigger("zoom.destroy")},deInitZoomInSlide:function(t){t.slides.each((function(t,i){h.deInitZoom(e(i))}))},productInitZoomForCurrentSlide:function(t){if("function"==typeof e.fn.zoom){var i=s.hasClass("show-image-zoom-yes"),a=t.slides.eq(t.currentSlide);if(p||!i)return h.deInitZoom(a),!1;if(a.hasClass(_))return!1;a.addClass(_);var r=!1,n=t.computedW;if(a.each((function(t,i){if(e(i).find("img").data("large_image_width")>n)return r=!0,!1})),r){a.zoom({touch:!1}),setTimeout((function(){a.find(":hover").length&&a.trigger("mouseover")}),100)}}},playPauseVideo:function(e,t){var i,r,n,o,s,d;i=e.slides.eq(e.currentSlide),a.play_on_mobile,s=!!a.mute,d=!!a.loop;var l=i.find("iframe");if(r=l.length>0?l.attr("title").split(" ")[0]:"video",n=l.get(0),"vimeo"===r)switch(t){case"play":0,h.postMessageToPlayer(n,{method:"play",value:1});break;case"pause":h.postMessageToPlayer(n,{method:"pause",value:1})}else if("youtube"===r)switch(t){case"play":s&&h.postMessageToPlayer(n,{event:"command",func:"mute"}),h.postMessageToPlayer(n,{event:"command",func:"playVideo"}),d&&h.postMessageToPlayer(n,{event:"command",func:"loop"});break;case"pause":h.postMessageToPlayer(n,{event:"command",func:"pauseVideo"})}else"video"===r&&null!=(o=i.find("video").get(0))&&("play"===t?o.play():o.pause())},postMessageToPlayer:function(e,t){null!=e&&null!=t&&e.contentWindow.postMessage(JSON.stringify(t),"*")},calculateProductThumbnailSize:function(e){var t=u.data("flexslider");if(void 0===t)return!1;var i=!0,a=s.vars.colNum,r=s.vars.thumbGap,n=u.find(".slides li");s.clearPrecisionSizes();var o=(s.vars.isVertical?m.outerHeight():m.outerWidth())/a-r+r/a;if(o=Math.round(o),n.length<=a&&(i=!1),i?u.removeClass("stop-transition"):u.addClass("stop-transition"),s.vars.isVertical){var d=(o+r)*a-r;u.css({height:d,width:Math.ceil(u.width())}),n.css({height:o}),u.find(".slides").css({height:(o+r)*n.length}),m.css({height:d,width:Math.ceil(c.width())})}else{var l=(o+r)*a-r;u.css({width:l}),m.css({width:l})}var v=m.data("flexslider");return void 0!==v&&(v.doMath(),v.setup(),v.setProps()),e&&(s.updateThumbnailImages(),s.updateGalleryImages(),t.vars.direction=s.vars.scrollMode,t.vars.itemMargin=r,t.vars.directionNav=i,t.vars.itemWidth=o,t.doMath(),t.setup(),t.setProps()),!0},onResetSlidePosition:function(){var e=m.data("flexslider");void 0!==e&&e.flexslider(0,e.vars.pauseOnAction,!1,!0)}},s.clearPrecisionSizes=function(){m.css({width:"",height:""}),s.vars.isVertical?u.css({width:""}):u.css({width:"",height:""})},s.refresh=function(){h.initVars(),h.calculateProductThumbnailSize(!1)&&setTimeout((function(){h.calculateProductThumbnailSize(!0)}),150)},s.updateGalleryImages=function(e){var t=s.hasClass("preserve-gallery-ratio-y");void 0===e&&(e=m.find(".slides li")),h.prepareImages(e,t)},s.updateThumbnailImages=function(e){var t=s.hasClass("preserve-thumb-ratio-y");void 0===e&&(e=u.find(".slides li")),h.prepareImages(e,t)},h.init()},e.productNavigation=function(t){var i,a=e(t),r=a.find(".the7-product-navigation .img-ratio-wrapper");e.data(t,"productNavigation",a),i={init:function(){r.find("img").the7ImageRatio(),a.refresh(),e(window).on("debouncedresize",(function(){a.refresh()}))}},a.refresh=function(e){var t=a.hasClass("preserve-img-ratio-y");void 0===e&&(e=r),e.the7ImageRatio("update",t)},i.init()},e(document).on("found_variation reset_image","form.cart",(function(i,a){var r=e(this);!function(e,i,a){var r=i.find(".dt-product-gallery"),n=i.find(".dt-product-thumbs .slides"),o=n.find("li:eq(0)"),s=i.data("productGallery");if(e&&e.image&&e.image.src&&e.image.src.length>1){var d=o.find("img"),l=r.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder").eq(0),c=l.find(".wp-post-image"),m=r.find(".zoomImg"),u=l.find("a").eq(0);t(i);var v=n.find('li img[data-src="'+e.image.full_src+'"]');if(v.length>0)return v.trigger("click"),a.attr("dt-current-image",e.image_id),void window.setTimeout((function(){r.trigger("woocommerce_gallery_init_zoom")}),20);c.wc_set_variation_attr("src",e.image.src),c.wc_set_variation_attr("height",e.image.src_h),c.wc_set_variation_attr("width",e.image.src_w),c.wc_set_variation_attr("srcset",e.image.srcset),c.wc_set_variation_attr("sizes",e.image.sizes),c.wc_set_variation_attr("title",e.image.title),c.wc_set_variation_attr("data-caption",e.image.caption),c.wc_set_variation_attr("alt",e.image.alt),c.wc_set_variation_attr("data-src",e.image.full_src),c.wc_set_variation_attr("data-large_image",e.image.full_src),c.wc_set_variation_attr("data-large_image_width",e.image.full_src_w),c.wc_set_variation_attr("data-large_image_height",e.image.full_src_h),l.wc_set_variation_attr("data-thumb",e.image.src),d.wc_set_variation_attr("srcset",""),d.wc_set_variation_attr("src",e.image.src),d.wc_set_variation_attr("data-src",e.image.full_src),u.wc_set_variation_attr("href",e.image.full_src),u.wc_variations_image_update(e),m.attr("src",e.image.src),m.attr("srcset",e.image.srcset),m.attr("data-large_image",e.image.full_src),m.attr("data-large_image_width",e.image.full_src_w),m.attr("data-large_image_height",e.image.full_src_h)}else t(i);void 0!==s&&(s.updateThumbnailImages(o),s.updateGalleryImages(r.find(".slides li:eq(0)")));window.setTimeout((function(){!function(e,t,i){var a=t.find(".dt-product-gallery"),r=e&&e.image_id?e.image_id:"";i.attr("dt-current-image")!==r&&(reset_slide_position=!0);i.attr("dt-current-image",r),reset_slide_position&&a.trigger("woocommerce_gallery_reset_slide_position")}(e,i,a),r.trigger("woocommerce_gallery_init_zoom")}),20)}(a,e(".elementor-widget-the7-woocommerce-product-images"),r)})),e.fn.productGallery=function(){return this.each((function(){"function"==typeof e.fn.flexslider?(void 0!==e(this).data("productGallery")&&e(this).removeData("productGallery"),new e.productGallery(this)):console.error("Cannot initialize productGallery, flexslider library not found!")}))},e.fn.productNavigation=function(){return this.each((function(){"function"==typeof e.fn.the7ImageRatio?(void 0!==e(this).data("productNavigation")&&e(this).removeData("productNavigation"),new e.productNavigation(this)):console.error("Cannot initialize the7ImageRatio, the7-main library not found!")}))},e(window).on("elementor/frontend/init",(function(){function e(e,t,i){var a;return void 0===i&&(i=!1),function(){var r=this,n=arguments;null!==a&&clearTimeout(a),a=window.setTimeout((function(){a=null,i||e.apply(r,n)}),t),i&&!a&&e.apply(r,n)}}elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-images.default",(function(t,i){i(document).ready((function(){t.productGallery();var i=e((function(){var e=t.data("productGallery");void 0!==e&&e.refresh()}),250,!1),a=t.find(".dt-wc-product-gallery"),r=a.width();setInterval((function(){a.width()!==r&&(i(),r=a.width())}),100)}))})),elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-navigation.default",(function(t,i){i(document).ready((function(){t.productNavigation();e((function(){var e=t.data("productNavigation");void 0!==e&&e.refresh()}),600,!1)}))}))}))}(jQuery);