!function(e){e.the7PostLoop=function(t){const n={gridContainer:".sGrid-container",filterContainer:".filter",filterCategories:".filter-categories",paginator:".paginator",wrapper:".the7-elementor-widget"},o={inPlaceTemplateEditable:"elementor-in-place-template-editable",loading:"loading-effect",altTemplate:"the7-alternate-templates"},i={paged:"data-paged",pagenum:"data-page-num",paginationMode:"data-pagination-mode"};let a,r,s,l,d,f,c=e(t),g=c.find(n.wrapper).first();c.vars={masonryActive:!1,filteradeActive:!1,useCustomPagination:!1,isInlineEditing:!1,effectsTimer:null,effectsTimerEnable:!1,ajaxLoading:!1},e.data(t,"the7PostLoop",c),s={init:function(){a=new The7ElementorSettings(c),d=a.getID(),l=a.getWidgetType(),r=a.getSettings(),s.initElements(),s.bindEvents(),c.refresh(),elementorFrontend.isEditMode()&&(s.handleCTA(),window.the7ApplyGeneralFilterHandlers(f.$filterCategories)),c.refresh=elementorFrontend.debounce(c.refresh,300)},initElements:function(){f={$gridContainer:g.children(n.gridContainer).first(),$filterContainer:g.children(n.filterContainer).first(),$paginator:g.children(n.paginator).first()},f.$filterCategories=f.$filterContainer.find(n.filterCategories).first(),f.$filterItems=f.$filterCategories.find("> a")},onFilterBtnClick(t){c.vars.useCustomPagination&&(f.$gridContainerr.resetEffects(),e(t.target).removeClass("act"),s.addLoadingAnimation())},onStandardPaginationBtnClick(e){s.addLoadingAnimation()},onAjaxPaginationBtnClick(t){if(t.preventDefault(),elementorFrontend.isEditMode())return;if(c.vars.ajaxLoading)return;let o=e(this),a=parseInt(g.attr(i.paged));if(parseInt(o.attr(i.pagenum))===a)return;c.vars.ajaxLoading=!0;let r=s.updateURLQueryString(o.attr("href")),l=s.getAjaxData();s.addLoadingAnimation(),e.ajax({type:"GET",url:r,data:l,error:function(e){},success:function(t){if(t){f.$gridContainer.The7SimpleFilterade("destroy");let o=e(t).find(`.elementor-element-${d} ${n.wrapper}`).first();if(0===o.length)return void console.log("Cannot loads ajax data");let a=o.children(n.gridContainer).first(),r=o.children(n.paginator).first();f.$gridContainer.replaceWith(a),f.$paginator.replaceWith(r);let l=o.attr(i.paged);g.attr(i.paged,l),c.vars.filteradeActive=!1,c.vars.useCustomPagination=!1,c.vars.masonryActive=!1,s.initElements(),s.unBindEvents(),s.bindEvents(),s.handleElementHandlers(),c.refresh(),f.$gridContainer.The7SimpleFilterade("paginationScroll",f.$paginator)}},complete:function(){s.removeLoadingAnimation(),c.vars.ajaxLoading=!1}})},initPagination:function(){if(!c.vars.useCustomPagination){let e=g.attr(i.paginationMode);"ajax_pagination"===e?(f.$paginator.find("a").on("click",s.onAjaxPaginationBtnClick),c.vars.useCustomPagination=!0):"standard"===e?(f.$paginator.find("a").on("click",s.onStandardPaginationBtnClick),c.vars.useCustomPagination=!0):g.hasClass(o.altTemplate)&&(c.vars.useCustomPagination=!0)}},getClosestDataElementorId:function(){const e=c.closest("[data-elementor-id]");return e?e.data("elementor-id"):0},getAjaxData:function(){return{"the7-widget-post-id":elementorFrontend.config.post.id||s.getClosestDataElementorId(),"the7-widget-content":d}},updateURLQueryString:function(e){const t=new URL(window.location.href),n=new URL(e);t.pathname=n.pathname;const o=t.searchParams,i=n.searchParams;return i.forEach(((e,t)=>{o.set(t,e)})),i.has("the7-page-"+d)||o.delete("the7-page-"+d),history.pushState(null,"",t.href),t.href},initFilter:function(){let e=s.getFilterConfig();c.vars.filteradeActive?f.$gridContainer.The7SimpleFilterade("update",e):(f.$gridContainer.The7SimpleFilterade(e),c.vars.filteradeActive=!0)},getFilterConfig:function(){let e=the7ShortcodesFilterConfig(f.$filterContainer);e.paginationMode=g.attr(i.paginationMode),e.pageLimit=g.attr("data-post-limit"),e.pageControls=g.children(".paginator, .paginator-more-button"),e.pagesToShow=g.hasClass("show-all-pages")?999:5,e.pagerClass="page-numbers filter-item",e.nodesSelector="> .wf-cell",e.usePaginationScroll="y"===r.pagination_scroll,e.scrollPagesOffset=r.pagination_scroll_offset?r.pagination_scroll_offset.size:0,e.infinityScroll=g.hasClass("lazy-loading-mode");let t=The7ElementorSettings.getResponsiveControlValue(r,"show_categories_filter");return(c.vars.useCustomPagination||"hide"===t)&&(e.useFilters=!1,e.useSorting=!1),e},handleLoadingEffects:function(){c.vars.effectsTimerEnable?(clearTimeout(c.vars.effectsTimer),c.vars.effectsTimer=setTimeout((function(){c.vars.effectsTimerEnable=!1,s.processEffects(),elementorFrontend.elements.$window.on("scroll",s.handleLoadingEffects)}),500)):s.processEffects()},addLoadingAnimation:function(){c.addClass(o.loading)},removeLoadingAnimation:function(){c.removeClass(o.loading)},processEffects:function(){let e=f.$gridContainer.children(".wf-cell:not(.shown)");window.the7ProcessEffects(e)},handleElementHandlers:function(){const e=f.$gridContainer.find(".e-loop-item");runElementHandlers(e)},handleCTA:function(){if("undefined"===elementorPro)return;const e=document.querySelector(`[data-id="${a.getID()}"] .e-loop-empty-view__wrapper`);if(document.querySelector(`[data-id="${a.getID()}"] .e-loop-empty-view__wrapper_old`))return void c.css("opacity",1);if(!e)return;const t=e.attachShadow({mode:"open"});t.appendChild(elementorPro.modules.loopBuilder.getCtaStyles()),t.appendChild(elementorPro.modules.loopBuilder.getCtaContent(l));t.querySelector(".e-loop-empty-view__box-cta").addEventListener("click",(()=>{elementorPro.modules.loopBuilder.createTemplate(),s.handlePostEdit()})),c.css("opacity",1)},bindEvents:function(){elementorFrontend.elements.$window.on("scroll",s.handleLoadingEffects),elementorFrontend.elements.$window.on("the7-resize-width",s.handleResize),f.$gridContainer.on("beforeSwitchPage",s.onBeforeSwitchPage),f.$gridContainer.on("updateReady",s.onFilteradeUpdateReady),f.$filterItems.on("click",s.onFilterBtnClick)},unBindEvents:function(){elementorFrontend.elements.$window.off("scroll",s.handleLoadingEffects),elementorFrontend.elements.$window.off("the7-resize-width",s.handleResize),f.$gridContainer.off("beforeSwitchPage",s.onBeforeSwitchPage),f.$gridContainer.off("updateReady",s.onFilteradeUpdateReady),f.$filterItems.off("click",s.onFilterBtnClick)},onBeforeSwitchPage:function(){elementorFrontend.elements.$window.off("scroll",s.handleLoadingEffects),c.vars.effectsTimerEnable=!0},onFilteradeUpdateReady:function(e,t){"loadMoreButton"!==t&&f.$gridContainer.resetEffects(),s.handleLoadingEffects(),s.updateSimpleMasonry()},handleResize:function(){s.initFilter(),s.isMasonryEnabled()?c.vars.masonryActive?s.updateSimpleMasonry():(f.$gridContainer.The7SimpleMasonry(s.getMasonryConfig()),c.vars.masonryActive=!0):c.vars.masonryActive&&(f.$gridContainer.The7SimpleMasonry("destroy"),c.vars.masonryActive=!1)},updateSimpleMasonry(){c.vars.masonryActive&&f.$gridContainer.The7SimpleMasonry("setSettings",s.getMasonryConfig())},getMasonryConfig:function(){return{items:".wf-cell.visible",columnsCount:+The7ElementorSettings.getResponsiveControlValue(r,"columns","size")||0,verticalSpaceBetween:+The7ElementorSettings.getResponsiveControlValue(r,"rows_gap","size")||0}},isMasonryEnabled:function(){return!!r.layout},handlePostEdit(){c.vars.isInlineEditing=!0,c.addClass(o.inPlaceTemplateEditable)},updateOption:function(e){r[e]}},c.refresh=function(){r=a.getSettings(),s.initPagination(),s.handleResize()},c.delete=function(){s.unBindEvents(),c.removeData("the7PostLoop")},c.onDocumentLoaded=function(e){if("loop-item"===e.config.type){s.handlePostEdit();let t=[];const n=e.id;t=[...t,"style#loop-"+n,"link#font-loop-"+n,"style#loop-dynamic-"+n],t.forEach((e=>{c.find(e).remove()}))}},s.init()},e.fn.the7PostLoop=function(){return this.each((function(){var t=e(this).data("the7PostLoop");void 0!==t&&t.delete(),new e.the7PostLoop(this)}))},e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/the7-post-loop.post",(function(e,t){t(document).ready((function(){e.the7PostLoop()}))})),elementorFrontend.isEditMode()&&(elementorEditorAddOnChangeHandler("the7-post-loop",(function(t,n){let o=["layout",...The7ElementorSettings.getResponsiveSettingList("columns"),...The7ElementorSettings.getResponsiveSettingList("rows_gap"),...The7ElementorSettings.getResponsiveSettingList("columns_gap"),"pagination_scroll_offset","pagination_scroll"];const i=t.model.get("name");if(-1!==o.indexOf(i)){const t=e(n.$el).data("the7PostLoop");void 0!==t&&t.refresh(i)}})),elementor.on("document:loaded",(function(t){e(".elementor-widget-the7-post-loop").each((function(){const n=e(this).data("the7PostLoop");void 0!==n&&n.onDocumentLoaded(t)}))})))}))}(jQuery);